@using StudiBloc3_Mercadona.Model
@typeparam T
@functions {
    private T selectedValue;
    private bool isDropdownVisible = false;

    [Parameter] public IEnumerable<T> Items { get; set; }
    [Parameter] public Func<T, string> DisplayValue { get; set; }

    private void ToggleDropdown()
    {
        isDropdownVisible = !isDropdownVisible;
    }

    private void SelectOption(T option)
    {
        selectedValue = option;
        isDropdownVisible = false;
    }
}

<div class="editable-dropdown">
    <div @onclick="ToggleDropdown" style="display: flex; align-items: center; cursor: pointer;">
        <input type="text" value="@DisplayValue(selectedValue)" readonly />
        <div class="arrow">@arrow</div>
    </div>
    <div class="dropdown-menu" style="display: @(isDropdownVisible ? "block" : "none")">
        @if (Items != null)
        {
            @foreach (var option in Items)
            {
                <div class="dropdown-item" @onclick="() => SelectOption(option)">
                    @DisplayValue(option)
                </div>
            }
        }
    </div>
</div>

@code {
    private string arrow => isDropdownVisible ? "▲" : "▼";
}

<style>
    .editable-dropdown {
        position: relative;
        width: 200px;
    }

    .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        border: 1px solid #ccc;
        background-color: #fff;
    }

    .dropdown-item {
        padding: 8px;
        cursor: pointer;
    }

    .dropdown-item:hover {
        background-color: #f0f0f0;
    }
    
    .arrow {
            margin-left: 10px;
        }
</style>